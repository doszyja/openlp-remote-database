# Cursor AI Rules for OpenLP Database Sync Project

**Repository**: https://github.com/doszyja/openlp-remote-database

## ⚠️ CRITICAL: Documentation as Source of Truth

**The `docs/` folder is the SINGLE SOURCE OF TRUTH for this project.**

### Documentation Priority Rules
1. **ALWAYS** check `docs/` folder first before making any decisions
2. **ALWAYS** reference documentation from `docs/` when answering questions
3. **ALWAYS** update `docs/` when making architectural or design changes
4. **ALWAYS** catalog and index all files in `docs/` directory
5. Documentation in `docs/` takes precedence over code comments or other sources
6. When documentation conflicts with code, documentation is authoritative

### Automatic Documentation Indexing
- All files in `docs/` directory MUST be automatically indexed and available in context
- All markdown files (*.md) in `docs/` are considered active documentation
- Documentation files should be read and referenced proactively, not reactively

## Context Management

### Always Include in Context
- **The entire `docs/` folder** - This is the primary source of truth and MUST be indexed
- **All markdown files (*.md)** in the repository should be automatically considered as context
- Prioritize these files for context:
  1. `PROJECT_PLAN.md` - High-level project plan with epics
  2. `docs/DETAILED_TODO.md` - Granular task breakdown (CRITICAL for tracking progress)
  3. `docs/PROJECT_RULES.md` - Coding standards and guidelines
  4. `docs/ARCHITECTURE.md` - System architecture and design decisions
  5. `docs/CONTEXT.md` - Project context and background information
  6. `docs/ADRs.md` - Architecture Decision Records
  7. `PROJECT_DESCRIPTION.md` - Original project requirements
  8. `README.md` - Project overview and setup

### Documentation Files to Always Reference
- `docs/MATERIAL_UI_GUIDE.md` - Material UI implementation patterns
- `docs/DISCORD_AUTH_SETUP.md` - Discord OAuth setup instructions
- `docs/DOCKER_SETUP.md` - Docker and Docker Compose guide

### Context Priority Order
When providing assistance, always:
1. **First check** `docs/DETAILED_TODO.md` to understand current task status
2. **Reference** `PROJECT_PLAN.md` for epic-level understanding
3. **Follow** `docs/PROJECT_RULES.md` for coding standards
4. **Consult** `docs/ARCHITECTURE.md` for system design
5. **Review** `docs/ADRs.md` for architectural decisions
6. **Check** `docs/CONTEXT.md` for project background

## Project Context

### Technology Stack
- **Monorepo**: pnpm workspaces
- **Backend**: NestJS with TypeScript, Mongoose ODM, MongoDB
- **Frontend**: React 18 + Vite + TypeScript, Material UI (MUI)
- **Sync Tool**: Node.js CLI with TypeScript
- **Containerization**: Docker with Docker Compose
- **Node.js**: Version 22
- **Authentication**: Discord OAuth (Phase 2)

### Project Structure
```
openlp-database/
├── apps/
│   ├── api/          # NestJS backend
│   ├── web/           # React frontend
│   └── sync/          # OpenLP sync CLI tool
├── packages/
│   └── shared/        # Shared TypeScript types
├── docs/              # All documentation
└── docker-compose.yml # Docker setup
```

### Key Principles
- Backend MongoDB database is the single source of truth
- One-way sync: Backend → OpenLP SQLite
- Mobile-friendly frontend for phone editing
- Discord OAuth for authentication (Phase 2)
- Material UI for frontend components
- Docker for deployment

## Task Management

### When Starting Work
1. Check `docs/DETAILED_TODO.md` for current task status
2. Identify which epic and task you're working on
3. Review related documentation before coding
4. Follow project rules and architecture decisions

### When Completing Tasks
1. Update `docs/DETAILED_TODO.md` to mark tasks as complete
2. Update relevant documentation if architecture changes
3. Add ADR if making significant architectural decisions
4. Keep context files synchronized

### Code Standards
- Follow TypeScript strict mode
- Use Mongoose for all database access
- Use Material UI components in frontend
- Follow naming conventions in `docs/PROJECT_RULES.md`
- Write tests for new features
- Update documentation as needed

## Important Reminders

### Always Consider
- This is a monorepo - respect workspace boundaries
- Backend uses Mongoose, not raw MongoDB queries
- Frontend uses Material UI, not custom CSS
- Docker setup uses Node.js 22
- Discord OAuth is Phase 2 feature
- MVP focuses on core CRUD and one-way sync
- Database is MongoDB (migrated from PostgreSQL on 2025-01-22)

### When Making Decisions
- Check `docs/ADRs.md` for existing decisions
- Document new decisions in ADRs
- Consider impact on all three apps (api, web, sync)
- Maintain consistency across the monorepo

### Context Maintenance
- Keep all markdown files up to date
- Update TODO list as tasks progress
- Document architectural changes
- Maintain clear project context

## File Patterns to Include
- `*.md` - All markdown documentation
- `PROJECT_*.md` - Project planning files
- `docs/**/*.md` - All documentation files
- `README.md` - Project overview
- `.cursorrules` - This file

## Exclude from Context
- `node_modules/` - Dependencies
- `dist/` - Build outputs
- `.git/` - Git internals
- `*.log` - Log files
- Temporary files

---

**Last Updated**: 2025-01-23
**Purpose**: Ensure Cursor AI maintains proper context about the OpenLP Database Sync project, with `docs/` folder as the single source of truth

## Documentation Cataloging and Indexing

### `docs/` Folder as Source of Truth
The `docs/` folder MUST be:
- **Always indexed** - All files in `docs/` should be cataloged and searchable
- **Always referenced** - When answering questions, always check `docs/` first
- **Always updated** - When making changes, update relevant docs in `docs/`
- **Always authoritative** - Documentation in `docs/` overrides other sources

### Documentation Files Structure
All markdown files (*.md) in the repository are automatically included in context. This includes:
- **ALL files in the `docs/` directory** (PRIMARY SOURCE OF TRUTH)
- Root-level markdown files (README.md, PROJECT_PLAN.md, etc.)
- Any markdown files in subdirectories

### Automatic Context Inclusion
The `.cursorrules` file ensures that when you work on this project:
- All documentation in `docs/` is automatically cataloged and indexed
- Documentation is proactively loaded into context, not just when referenced
- The following information is always available:
  - Project architecture and decisions (`docs/ARCHITECTURE.md`, `docs/ADRs.md`)
  - Current progress and TODO status (`docs/DETAILED_TODO.md`, `docs/PROGRESS.md`)
  - Coding standards and guidelines (`docs/PROJECT_RULES.md`)
  - Technology stack and setup instructions (`docs/DOCKER_SETUP.md`, etc.)
  - All other documentation files in `docs/`

### Documentation Indexing Requirements
- Index all `.md` files in `docs/` directory
- Maintain searchable index of all documentation topics
- Enable quick lookup of documentation by topic or keyword
- Ensure documentation is always up-to-date and synchronized

